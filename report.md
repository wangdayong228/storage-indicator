# 数据存储系统性能测试报告

## 一、概述

本报告旨在评估 **[数据存储系统名称]** 在持续高负载下的性能表现。测试模拟了真实生产环境中每天 8-12 小时、持续 100 天、总计 800 工时的读写操作，以评估系统的稳定性、吞吐量、延迟等关键指标。

## 二、测试环境

### 1. 硬件环境

- **服务器型号**: [服务器型号]
- **CPU**: [CPU 型号及核数]
- **内存**: [内存容量]
- **存储**: [存储类型及容量，如 SSD、HDD]
- **网络**: [网络带宽]

### 2. 软件环境

- **操作系统**: [操作系统版本]
- **数据存储系统**: [数据存储系统名称及版本]
- **测试工具**: [测试工具名称及版本]

### 3. 测试数据

- **数据类型**: [数据类型，如文本、图片、视频等]

## 三、测试方法

### 1. 测试场景
模拟真实生产环境，设置每天 8-12 小时的读写操作，持续 100 天。

### 2. 测试指标

测试工具: 使用 [测试工具名称] 模拟用户请求，并记录测试指标

**系统指标**
- 同步进度差异
- 内存池刷新效率
- 事务同步时间
- 同步任务积压

**服务器指标**
- 网络吞吐量: 每秒处理的读写请求数量 (IOPS)。
- 读写硬盘延迟: 每个读写请求的平均响应时间。
- 资源利用率: CPU、内存、磁盘、网络等资源的占用情况。

<!-- 本次测试旨在评估基于区块链的分布式存储系统与数据治理平台的性能表现。测试数据来源于系统生成的日志文件，通过一系列的提取器（extractors）将日志数据转换为可分析的CSV格式文件。随后，使用Python脚本生成图表以可视化数据。

#### 数据提取

- 使用Go语言编写的提取器从日志文件中提取关键信息，并生成CSV文件。
- 提取器包括：`SyncProgressDiff`、`MemPoolRefreshRate`、`TxSyncCompleteTimeCost`、`SyncTaskBacklog`、`MineWork`。

#### 数据可视化

- 使用Python的Matplotlib库生成折线图和箱型图。
- 图表包括：同步进度差异、内存池刷新效率、事务同步时间、同步任务积压、挖矿阶段耗时分布。 -->

## 四、测试结果

### 1. 同步进度差异

- 数据文件：[`SyncProgressDiff.csv`](./out/SyncProgressDiff.csv)
- 图表：箱型图显示了不同时间点的区块同步进度差异。
![`SyncProgressDiff.png`](./out/SyncProgressDiff_boxplot.png) 
- **数据描述**：大部分同步进度差异集中在2个区块以内，表明系统在大多数时间内保持了高效的同步状态。

### 2. 内存池刷新效率

- 数据文件：[`MemPoolRefreshRate.csv`](./out/MemPoolRefreshRate.csv)
- 图表：箱型图展示了内存池刷新时间的分布情况。
![`MemPoolRefreshRate.png`](./out/MemPoolRefreshRate_boxplot.png) 
- **数据描述**：大部分刷新时间集中在50微秒以内，极少数情况下超过100微秒，显示出系统在内存管理上的高效性。

### 3. 事务同步时间

- 数据文件：[`TxSyncCompleteTimeCost.csv`](./out/TxSyncCompleteTimeCost.csv)
- 图表：箱型图展示了事务同步完成所需时间的分布。
![`TxSyncCompleteTimeCost.png`](./out/TxSyncCompleteTimeCost_boxplot.png) 
- **数据描述**：大部分事务同步时间在200毫秒以内，少数高峰期达到500毫秒，显示出系统在事务处理上的稳定性。

### 4. 同步任务积压

- 数据文件：[`SyncTaskBacklog.csv`](./out/SyncTaskBacklog.csv)
- 图表：箱型图显示了不同时间点的未完成任务数量。
![`SyncTaskBacklog.png`](./out/SyncTaskBacklog_boxplot.png) 
- **数据描述**：未完成任务数量大多保持在10个以下，表明系统在任务调度上的高效性。

### 5. 服务器性能指标

- 数据文件：位于 `out/server/ssd` 文件夹中。
- 图表：包括 CPU 使用率、读 IOPS、写 IOPS 和读写磁盘延迟的折线图。
![`server_ssd.png`](./out/server/ssd/monitoring.jpg) 
![`server_ssd.png`](./out/server/ssd/resource.jpg) 
- **数据描述**：
  - **CPU 使用率**：大部分时间 CPU 使用率保持在 12.5% 以下，峰值达到 85%。
  - **读 IOPS**：平均值 400 以下，峰值800。
  - **写 IOPS**：平均值 30 以下，峰值100。
  - **读硬盘延迟**：大部分延迟在 1 毫秒以内，极少数情况下超过 2 毫秒，平均延迟 1 毫秒。
  - **写硬盘延迟**：大部分延迟在 9 毫秒以内，极少数情况下超过 40 毫秒，平均延迟 22 毫秒。

## 五、结果分析

通过对图表的分析，我们可以观察到：

- **同步进度差异**：系统在大多数时间内保持了高效的同步状态，确保了数据的一致性和完整性。
- **内存池刷新效率**：内存管理高效，刷新时间短，极大地提高了系统的响应速度。
- **事务同步时间**：事务处理稳定，确保了高并发情况下的系统性能。
- **同步任务积压**：任务调度高效，未完成任务数量少，表明系统在高负载下仍能保持良好的性能。
- **服务器性能指标**：服务器在大多数时间内表现良好，CPU 和内存使用率较低，硬盘读写速度稳定，IOPS 和延迟均在可接受范围内，表明系统在高负载下仍能保持良好的性能。

## 六、结论

本次测试表明，基于区块链的分布式存储系统在正常负载下表现优异，尤其在数据同步、内存管理和任务调度方面展现了显著的优势。服务器性能指标显示，系统在高负载情况下仍能保持良好的性能，未来的优化可以进一步提升系统在极端条件下的表现。